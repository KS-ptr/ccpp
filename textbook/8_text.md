## ポインタ
### アドレス
変数の値はメモリに格納されているが、C++にはメモリの位置を表す**ポインタ**という機能が用意されている。また、メモリの位置を表す**アドレス**という概念もある。変数の値が格納されているメモリのアドレスを知るには、**アドレス演算子「&」**を使う。<u>**アドレス演算子によって、変数の値がメモリ上のどの位置に記憶されているかを知ることができる**</u>。

### ポインタ
アドレスと使うコードを記述するために、**アドレスを格納する特殊な変数を学ぶ。この変数をポインタという**。ポインタの使い方自体は、これまでの変数と同じ。ただし、<u>**ポインタを表す変数には必ず「*」をつけて宣言する**</u>ことになっている。
```C++
int* pA;
```
とすると、**int型の変数のアドレスを格納できるポインタpA**という宣言となる。ポインタには、原則として指定した型以外の値のアドレスは格納できない。型名の指定の際は注意。
```C++
pA = $a;
```
この代入によって、**pAに変数aのアドレスを格納する**ということができる。また、この代入によって変数aとポインタpAの間には何かしらの関係ができたことになり、この関係のことを<u>**pAは変数aを指す**</u>という。

### ポインタから変数の値を知る
ポインタに変数のアドレスが格納されると、<u>そのポインタから逆にたどって元の変数の値を知ることができる</u>。ポインタから変数の値をたどるには、**「\*」演算子を使う。\*演算子は間接参照演算子という**。この演算子によって、ポインタに格納されているアドレスに対応する変数の値を知ることができる。ポインタpAに変数aのアドレスが格納されている場合は、```*pA```とすると変数aの値を間接的に知ることができる、ということになる。

ポインタを扱うときに注意しなければならないのは、「pA = &a」の様に代入せずに*pAを出力した場合など、ポインタがどこのアドレスを示しているか分からないので予想外の値を返すことである。ポインタの宣言時に```int *pA = &a```などのように初期化することで、このトラブルを回避できる。

### ポインタを使って変数を変更する
ポインタを使うと、ポインタが指している変数そのものの値を変更することができる。
```C++
#include<iostream>
using namespace std;

int main() {
    int a;
    int *pA;

    a = 5;
    pA = &a;

    cout << "aの値は" << a << endl;

    *pA = 50;

    cout << "*pAに50を代入" << endl;
    cout << "aの値は" << a << endl;
    return 0;
}
```
このコードではaの値が途中で変更されているが、「a = 50;」という代入文を使用していない。代わりに「*pA = 50;」を用いている。`*pA`と`a`は同じなので、`*pA = 50`と`a = 50`も同じということになる。変数に直接代入するのではなく、ポインタを経由して代入することのメリットもあるので、例を見ていく。

#### 値渡しと参照渡し
```C++
void swap(int x, int y) {
    int tmp;

    tmp = x;
    x = y;
    y = tmp;
}
```
swap関数は、引数xとyを交換する処理を行う関数として作成した。この関数内では、

1. xの値をtmpに代入する
2. yの値をxに代入する
3. tmpの値（元のxの値）をyに代入する

xの値とyの値を交換する処理を実装しているが、この関数を呼び出すと想定通りに引数通しの交換が行われない。ここで、第7章で関数について学んだように、
* 関数に実引数を渡す場合は「実引数の値だけが関数内に渡される」

ということになっている。このような引数の渡し方を**値渡し**という。上記のswap関数には、xとyの値だけが渡されることになる。これは、変数xとyの値を**コピーした値を交換しているだけに過ぎない**。ここで、ポインタを使うと関数の呼び出し時に指定した引数の値を変更することができる。`swap(int x, int y)`ではなく、仮引数をポインタとして`swap(int* x, int* y)`と定義し、
```C++
void swap(int* px, int* py) {
    int tmp;

    tmp = *px;
    *px = *py;
    *py = tmp;
}
```
とする。呼び出す際は`swap(&a, &b)`のように、変数のアドレスを渡す。こうすると、変数2つが交換される。このように、呼び出し元の変数の値を関数内で変更したい場合には仮引数にポインタを渡すようにする。そして、関数を呼び出すときにアドレスを関数に渡すことにする。
* *px, *pyはx, yと同じものを表す

と考えることができ、
1. *pxとxが同じ
2. *pyとyが同じ

という関係ができたことになる。つまり、この関数内では
* 仮引数側の*px, *pyを変更する　⇒　実引数のx, yを変更する

ということになる。このように、ポインタを関数の仮引数として使うと、実引数側の値を変更できる。関数が呼び出される時に、実引数のアドレスが関数に渡されることを**参照渡し**と呼ぶ。